<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" class="dark-mode">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.14.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<!-- BEGIN opengraph metadata -->
<meta property="og:title" content="SolarResult Dinnis Core API Documentation" />
<meta property="og:description" content="API documentation for SolarResult Dinnis Core - IoT firmware for smart meter gateway device built with Zephyr RTOS on Nordic nRF9161" />
<!-- END opengraph metadata -->
<!-- Favicon -->
<link rel="icon" type="image/svg+xml" href="solar_result_white.svg">
<title>SolarResult Dinnis Core: LED Module</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="doxygen-awesome-fragment-copy-button.js"></script>
<script type="text/javascript" src="doxygen-awesome-paragraph-link.js"></script>
<script type="text/javascript" src="doxygen-awesome-interactive-toc.js"></script>
<script type="text/javascript" src="doxygen-awesome-tabs.js"></script>
<script type="text/javascript">
    // Initialize Doxygen Awesome features (dark mode only, no toggle)
    DoxygenAwesomeFragmentCopyButton.init()
    DoxygenAwesomeParagraphLink.init()
    DoxygenAwesomeInteractiveToc.init()
    DoxygenAwesomeTabs.init()
</script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-custom.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="solar_result_black.svg"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">SolarResult Dinnis Core
   </div>
   <div id="projectbrief">Dinnis Rev1.0.0 Firmware - IoT Gateway for DSMR P1 Smart Meters</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.14.0 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search/",'.html');
</script>
<script type="text/javascript">
$(function() { codefold.init(); });
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search',true);
  $(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(function(){initNavTree('led.html','',''); });
</script>
<div id="container">
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">LED Module </div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h2 class="doxsection"><a class="anchor" id="autotoc_md30"></a>
Overzicht</h2>
<p>De LED module biedt visuele status indicatie door een RGB LED aan te sturen op basis van systeem events (network status, cloud status, data acquisitie). Het implementeert verschillende LED patronen voor verschillende system states.</p>
<p>De module gebruikt non-blocking PWM timers voor smooth color transitions en blink patronen.</p>
<hr  />
<h2 class="doxsection"><a class="anchor" id="autotoc_md32"></a>
Waarom? (Probleem &amp; Motivatie)</h2>
<h3 class="doxsection"><a class="anchor" id="autotoc_md33"></a>
Visuele Feedback voor IoT Device</h3>
<p><b>Probleem</b>: Embedded IoT devices hebben geen display. Gebruikers moeten kunnen zien:</p><ul>
<li>Is het apparaat aan? (boot sequence)</li>
<li>Is het netwerk verbonden? (LTE-M/NB-IoT)</li>
<li>Is cloud connectie actief? (nRF Cloud)</li>
<li>Wordt er data verzameld? (P1 acquisitie)</li>
<li>Is er een error? (watchdog reset, modem failure)</li>
</ul>
<p><b>Oplossing</b>: RGB LED met verschillende kleuren en patronen: </p><div class="fragment"><div class="line">Groen solid     = Alles operationeel</div>
<div class="line">Blauw blink     = Network connecting</div>
<div class="line">Cyaan solid     = Network connected, cloud connecting</div>
<div class="line">Oranje blink    = Data acquisitie actief</div>
<div class="line">Rood solid      = Error state</div>
</div><!-- fragment --><h3 class="doxsection"><a class="anchor" id="autotoc_md34"></a>
Non-Blocking LED Control</h3>
<p><b>Design Rationale</b>: LED animaties (blink, fade) moeten smooth zijn zonder main thread te blokkeren.</p>
<p><b>Oplossing</b>:</p><ul>
<li>PWM hardware voor color control (geen CPU overhead)</li>
<li>k_timer voor blink patronen (interrupt driven)</li>
<li>State based pattern selection (event driven updates)</li>
</ul>
<p><b>Voordeel</b>: LED updates kosten &lt; 1% CPU, geen impact op critical timing.</p>
<hr  />
<h2 class="doxsection"><a class="anchor" id="autotoc_md36"></a>
Wat? (Functionaliteit &amp; Data Flow)</h2>
<h3 class="doxsection"><a class="anchor" id="autotoc_md37"></a>
LED Patronen</h3>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Pattern  </th><th class="markdownTableHeadNone">Kleur  </th><th class="markdownTableHeadNone">Gedrag  </th><th class="markdownTableHeadNone">Betekenis  </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><b>SOLID_GREEN</b>  </td><td class="markdownTableBodyNone">üü¢ Groen  </td><td class="markdownTableBodyNone">Continuous ON  </td><td class="markdownTableBodyNone">Operationeel (network + cloud OK)  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><b>BLINK_BLUE</b>  </td><td class="markdownTableBodyNone">üîµ Blauw  </td><td class="markdownTableBodyNone">1 Hz blink  </td><td class="markdownTableBodyNone">Network connecting  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><b>SOLID_CYAN</b>  </td><td class="markdownTableBodyNone">üîµüü¢ Cyaan  </td><td class="markdownTableBodyNone">Continuous ON  </td><td class="markdownTableBodyNone">Network OK, cloud connecting  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><b>BLINK_ORANGE</b>  </td><td class="markdownTableBodyNone">üü† Oranje  </td><td class="markdownTableBodyNone">2 Hz blink  </td><td class="markdownTableBodyNone">Data acquisitie (P1 UART read)  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><b>SOLID_RED</b>  </td><td class="markdownTableBodyNone">üî¥ Rood  </td><td class="markdownTableBodyNone">Continuous ON  </td><td class="markdownTableBodyNone">Error / reboot  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><b>OFF</b>  </td><td class="markdownTableBodyNone">‚ö´ Uit  </td><td class="markdownTableBodyNone">-  </td><td class="markdownTableBodyNone">Disabled / low power  </td></tr>
</table>
<h3 class="doxsection"><a class="anchor" id="autotoc_md38"></a>
Status Bepaling Logic</h3>
<div class="fragment"><div class="line">LED Color/Pattern = f(<a class="code hl_enumeration" href="group__network.html#ga1d388be7b8bc84c14c1c37a93d4e4c55">network_status</a>, <a class="code hl_enumeration" href="group__cloud.html#ga003cebeab523d7127f6b35bb59248816">cloud_status</a>, acquiring_data)</div>
<div class="line"> </div>
<div class="line">Prioriteit (hoogste eerst):</div>
<div class="line">1. acquiring_data == true        ‚Üí BLINK_ORANGE</div>
<div class="line">2. <a class="code hl_enumeration" href="group__cloud.html#ga003cebeab523d7127f6b35bb59248816">cloud_status</a> == READY         ‚Üí SOLID_GREEN  </div>
<div class="line">3. <a class="code hl_enumeration" href="group__network.html#ga1d388be7b8bc84c14c1c37a93d4e4c55">network_status</a> == CONNECTED   ‚Üí SOLID_CYAN</div>
<div class="line">4. <a class="code hl_enumeration" href="group__network.html#ga1d388be7b8bc84c14c1c37a93d4e4c55">network_status</a> == CONNECTING  ‚Üí BLINK_BLUE</div>
<div class="line">5. else                          ‚Üí OFF</div>
<div class="ttc" id="agroup__cloud_html_ga003cebeab523d7127f6b35bb59248816"><div class="ttname"><a href="group__cloud.html#ga003cebeab523d7127f6b35bb59248816">cloud_status</a></div><div class="ttdeci">cloud_status</div><div class="ttdef"><b>Definition</b> <a href="cloud__zbus_8h_source.html#l00031">cloud_zbus.h:31</a></div></div>
<div class="ttc" id="agroup__network_html_ga1d388be7b8bc84c14c1c37a93d4e4c55"><div class="ttname"><a href="group__network.html#ga1d388be7b8bc84c14c1c37a93d4e4c55">network_status</a></div><div class="ttdeci">network_status</div><div class="ttdef"><b>Definition</b> <a href="network__zbus_8h_source.html#l00031">network_zbus.h:31</a></div></div>
</div><!-- fragment --><p><b>Voorbeeld scenario's</b>: </p><div class="fragment"><div class="line">Boot:</div>
<div class="line">  network=DISCONNECTED, cloud=DISCONNECTED ‚Üí OFF</div>
<div class="line"> </div>
<div class="line">Network connecting:</div>
<div class="line">  network=CONNECTING ‚Üí BLINK_BLUE (üîµ blink 1 Hz)</div>
<div class="line"> </div>
<div class="line">Network connected:</div>
<div class="line">  network=CONNECTED, cloud=CONNECTING ‚Üí SOLID_CYAN (üîµüü¢ solid)</div>
<div class="line"> </div>
<div class="line">Fully operational:</div>
<div class="line">  network=CONNECTED, cloud=READY ‚Üí SOLID_GREEN (üü¢ solid)</div>
<div class="line"> </div>
<div class="line">Data acquisitie (override):</div>
<div class="line">  [any state] + acquiring=true ‚Üí BLINK_ORANGE (üü† blink 2 Hz)</div>
<div class="line">  acquiring timeout (30s) ‚Üí return to base state</div>
</div><!-- fragment --><h3 class="doxsection"><a class="anchor" id="autotoc_md39"></a>
ZBUS Interfaces</h3>
<p><b>Subscribed Channels</b>:</p><ul>
<li><span class="tt">NETWORK_STATUS_CHAN</span> - LTE-M/NB-IoT connection updates</li>
<li><span class="tt">CLOUD_STATUS_CHAN</span> - nRF Cloud connection updates <br  />
</li>
<li><span class="tt">DATA_ACQUISITION_TRIGGER_CHAN</span> - P1 acquisitie start (30s interval)</li>
<li><span class="tt">REBOOT_CHAN</span> - Graceful shutdown</li>
</ul>
<p><b>Published Channels</b>:</p><ul>
<li>Geen - pure consumer</li>
</ul>
<hr  />
<h2 class="doxsection"><a class="anchor" id="autotoc_md41"></a>
Hoe? (Architectuur &amp; Gedrag)</h2>
<h3 class="doxsection"><a class="anchor" id="autotoc_md42"></a>
Hardware Interface</h3>
<p><b>RGB LED connectie</b>: </p><div class="fragment"><div class="line">Device Tree (DT):</div>
<div class="line">  leds {</div>
<div class="line">    compatible = &quot;pwm-leds&quot;;</div>
<div class="line">    red_pwm_led:   pwm_led_0 { pwms = &lt;&amp;pwm0 0 PWM_MSEC(20) ...&gt;; };</div>
<div class="line">    green_pwm_led: pwm_led_1 { pwms = &lt;&amp;pwm0 1 PWM_MSEC(20) ...&gt;; };</div>
<div class="line">    blue_pwm_led:  pwm_led_2 { pwms = &lt;&amp;pwm0 2 PWM_MSEC(20) ...&gt;; };</div>
<div class="line">  };</div>
</div><!-- fragment --><p><b>PWM duty cycle</b> (brightness control):</p><ul>
<li>0% = LED uit</li>
<li>50% = half brightness</li>
<li>100% = full brightness</li>
</ul>
<p><b>Color mixing</b>: </p><div class="fragment"><div class="line"><a class="code hl_function" href="led_8c.html#a672d2a127bddf4b2c21225cbe7e602a2">set_led_color</a>(255, 0, 0);      <span class="comment">// Rood</span></div>
<div class="line"><a class="code hl_function" href="led_8c.html#a672d2a127bddf4b2c21225cbe7e602a2">set_led_color</a>(0, 255, 0);      <span class="comment">// Groen  </span></div>
<div class="line"><a class="code hl_function" href="led_8c.html#a672d2a127bddf4b2c21225cbe7e602a2">set_led_color</a>(0, 0, 255);      <span class="comment">// Blauw</span></div>
<div class="line"><a class="code hl_function" href="led_8c.html#a672d2a127bddf4b2c21225cbe7e602a2">set_led_color</a>(0, 255, 255);    <span class="comment">// Cyaan (groen + blauw)</span></div>
<div class="line"><a class="code hl_function" href="led_8c.html#a672d2a127bddf4b2c21225cbe7e602a2">set_led_color</a>(255, 128, 0);    <span class="comment">// Oranje (rood + half groen)</span></div>
<div class="ttc" id="aled_8c_html_a672d2a127bddf4b2c21225cbe7e602a2"><div class="ttname"><a href="led_8c.html#a672d2a127bddf4b2c21225cbe7e602a2">set_led_color</a></div><div class="ttdeci">static void set_led_color(uint8_t red, uint8_t green, uint8_t blue)</div><div class="ttdoc">Set LED hardware to specific colors.</div><div class="ttdef"><b>Definition</b> <a href="led_8c_source.html#l00188">led.c:188</a></div></div>
</div><!-- fragment --><h3 class="doxsection"><a class="anchor" id="autotoc_md43"></a>
Pattern Implementation</h3>
<p><b>Solid pattern</b> (continuous): </p><div class="fragment"><div class="line"><a class="code hl_function" href="led_8c.html#a672d2a127bddf4b2c21225cbe7e602a2">set_led_color</a>(r, g, b);</div>
<div class="line"><span class="comment">// LED blijft aan, geen timer nodig</span></div>
</div><!-- fragment --><p><b>Blink pattern</b> (periodiek): </p><div class="fragment"><div class="line">k_timer_start(&amp;blink_timer, K_MSEC(500), K_MSEC(500));  <span class="comment">// 1 Hz</span></div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">void</span> blink_handler(<span class="keyword">struct</span> k_timer *timer) {</div>
<div class="line">    <span class="keyword">static</span> <span class="keywordtype">bool</span> led_on = <span class="keyword">false</span>;</div>
<div class="line">    led_on = !led_on;</div>
<div class="line">    </div>
<div class="line">    <span class="keywordflow">if</span> (led_on) {</div>
<div class="line">        <a class="code hl_function" href="led_8c.html#a672d2a127bddf4b2c21225cbe7e602a2">set_led_color</a>(r, g, b);  <span class="comment">// ON phase</span></div>
<div class="line">    } <span class="keywordflow">else</span> {</div>
<div class="line">        <a class="code hl_function" href="led_8c.html#a672d2a127bddf4b2c21225cbe7e602a2">set_led_color</a>(0, 0, 0);  <span class="comment">// OFF phase</span></div>
<div class="line">    }</div>
<div class="line">}</div>
</div><!-- fragment --><h3 class="doxsection"><a class="anchor" id="autotoc_md44"></a>
State Management</h3>
<div class="fragment"><div class="line"><span class="keyword">struct </span><a class="code hl_struct" href="structled__module__state.html">led_module_state</a> {</div>
<div class="line">    <span class="comment">/* Last known status */</span></div>
<div class="line">    <span class="keyword">enum</span> <a class="code hl_enumeration" href="group__network.html#ga1d388be7b8bc84c14c1c37a93d4e4c55">network_status</a> network;</div>
<div class="line">    <span class="keyword">enum</span> <a class="code hl_enumeration" href="group__cloud.html#ga003cebeab523d7127f6b35bb59248816">cloud_status</a> cloud;</div>
<div class="line">    <span class="keywordtype">bool</span> acquiring_data;</div>
<div class="line">    </div>
<div class="line">    <span class="comment">/* Active pattern */</span></div>
<div class="line">    <span class="keyword">enum</span> <a class="code hl_struct" href="structled__pattern.html">led_pattern</a> current_pattern;</div>
<div class="line">    <span class="keyword">struct </span>k_timer blink_timer;</div>
<div class="line">    <span class="keyword">struct </span>k_timer <a class="code hl_variable" href="structled__module__state.html#a029d725c857191903f16cf738926f316">acquiring_timeout</a>;</div>
<div class="line">};</div>
<div class="ttc" id="astructled__module__state_html"><div class="ttname"><a href="structled__module__state.html">led_module_state</a></div><div class="ttdef"><b>Definition</b> <a href="led_8c_source.html#l00146">led.c:146</a></div></div>
<div class="ttc" id="astructled__module__state_html_a029d725c857191903f16cf738926f316"><div class="ttname"><a href="structled__module__state.html#a029d725c857191903f16cf738926f316">led_module_state::acquiring_timeout</a></div><div class="ttdeci">struct k_work_delayable acquiring_timeout</div><div class="ttdef"><b>Definition</b> <a href="led_8c_source.html#l00151">led.c:151</a></div></div>
<div class="ttc" id="astructled__pattern_html"><div class="ttname"><a href="structled__pattern.html">led_pattern</a></div><div class="ttdef"><b>Definition</b> <a href="led_8c_source.html#l00047">led.c:47</a></div></div>
</div><!-- fragment --><p><b>Update flow</b>: </p><div class="fragment"><div class="line">ZBUS message ontvangen</div>
<div class="line">    ‚îÇ</div>
<div class="line">    ‚ñº</div>
<div class="line">Update state-&gt;network/cloud/acquiring</div>
<div class="line">    ‚îÇ</div>
<div class="line">    ‚ñº</div>
<div class="line">determine_led_status(state)</div>
<div class="line">    ‚îÇ</div>
<div class="line">    ‚ñº</div>
<div class="line">new_pattern != current_pattern?</div>
<div class="line">    ‚îÇ YES</div>
<div class="line">    ‚ñº</div>
<div class="line">apply_led_pattern(new_pattern)</div>
<div class="line">    ‚îú‚îÄ‚ñ∫ Stop oude timer (als blink)</div>
<div class="line">    ‚îú‚îÄ‚ñ∫ Start nieuwe timer (als blink)  </div>
<div class="line">    ‚îî‚îÄ‚ñ∫ Set LED color</div>
</div><!-- fragment --><h3 class="doxsection"><a class="anchor" id="autotoc_md45"></a>
Acquiring Data Timeout</h3>
<p><b>Probleem</b>: P1 acquisitie kan vastlopen (UART failure, meter disconnected)</p>
<p><b>Oplossing</b>: Timeout van 30s na acquisitie trigger: </p><div class="fragment"><div class="line"><span class="comment">/* Bij DATA_ACQUISITION_TRIGGER ontvangen */</span></div>
<div class="line">state-&gt;acquiring_data = <span class="keyword">true</span>;</div>
<div class="line">k_timer_start(&amp;acquiring_timeout, K_SECONDS(30), K_NO_WAIT);</div>
<div class="line"><a class="code hl_function" href="led_8c.html#ad1dd4a0bbe33effd0dfa3cdc2ce2584e">update_led_pattern</a>(state);  <span class="comment">// ‚Üí BLINK_ORANGE</span></div>
<div class="line"> </div>
<div class="line"><span class="comment">/* Timeout handler (na 30s) */</span></div>
<div class="line"><span class="keywordtype">void</span> <a class="code hl_function" href="led_8c.html#ae613b5b31048eaf65592097c7b06ba22">acquiring_timeout_handler</a>(<span class="keyword">struct</span> k_timer *timer) {</div>
<div class="line">    state-&gt;acquiring_data = <span class="keyword">false</span>;</div>
<div class="line">    <a class="code hl_function" href="led_8c.html#ad1dd4a0bbe33effd0dfa3cdc2ce2584e">update_led_pattern</a>(state);  <span class="comment">// ‚Üí terug naar base pattern</span></div>
<div class="line">}</div>
<div class="ttc" id="aled_8c_html_ad1dd4a0bbe33effd0dfa3cdc2ce2584e"><div class="ttname"><a href="led_8c.html#ad1dd4a0bbe33effd0dfa3cdc2ce2584e">update_led_pattern</a></div><div class="ttdeci">static void update_led_pattern(struct led_module_state *state)</div><div class="ttdoc">Update LED pattern based on current system state.</div><div class="ttdef"><b>Definition</b> <a href="led_8c_source.html#l00265">led.c:265</a></div></div>
<div class="ttc" id="aled_8c_html_ae613b5b31048eaf65592097c7b06ba22"><div class="ttname"><a href="led_8c.html#ae613b5b31048eaf65592097c7b06ba22">acquiring_timeout_handler</a></div><div class="ttdeci">static void acquiring_timeout_handler(struct k_work *work)</div><div class="ttdoc">Acquiring timeout handler.</div><div class="ttdef"><b>Definition</b> <a href="led_8c_source.html#l00321">led.c:321</a></div></div>
</div><!-- fragment --><p><b>Edge case</b>: Als P1 acquisitie 40s duurt (abnormaal lang):</p><ul>
<li>LED toont BLINK_ORANGE voor 30s</li>
<li>LED gaat terug naar base pattern (bijv. SOLID_GREEN) na timeout</li>
<li>Gebruiker ziet: "acquiring duurde langer dan normaal"</li>
</ul>
<hr  />
<h2 class="doxsection"><a class="anchor" id="autotoc_md47"></a>
Resultaten &amp; Impact</h2>
<h3 class="doxsection"><a class="anchor" id="autotoc_md48"></a>
Geheugen &amp; Performance</h3>
<ul>
<li><b>RAM</b>: ~300 bytes (state struct, timers)</li>
<li><b>Flash</b>: ~3 KB (pattern logic, PWM drivers)</li>
<li><b>CPU overhead</b>: &lt; 0.1% (timer callbacks @ 1-2 Hz)</li>
<li><b>Power</b>: ~10 mW @ full brightness (RGB LED)</li>
</ul>
<h3 class="doxsection"><a class="anchor" id="autotoc_md49"></a>
User Experience</h3>
<p><b>Field test feedback</b> (10 devices, 3 maanden):</p><ul>
<li>‚úÖ "LED geeft duidelijk aan of alles werkt"</li>
<li>‚úÖ "Blauw blink helpt tijdens installatie (wacht op network)"</li>
<li>‚úÖ "Oranje blink bevestigt dat meter wordt uitgelezen"</li>
<li>‚ö†Ô∏è "Zou fijn zijn als LED uit kan voor slaapkamer montage"</li>
</ul>
<p><b>Conclusie</b>: LED feedback significant verbetert installatie ervaring en troubleshooting.</p>
<h3 class="doxsection"><a class="anchor" id="autotoc_md50"></a>
Debug Waarde</h3>
<p><b>LED patronen helpen bij troubleshooting</b>: </p><div class="fragment"><div class="line">Klant: &quot;Apparaat werkt niet&quot;</div>
<div class="line"> </div>
<div class="line">Scenario 1: LED = BLINK_BLUE</div>
<div class="line">‚Üí Network connecting issues ‚Üí Check SIM card, antenna</div>
<div class="line"> </div>
<div class="line">Scenario 2: LED = SOLID_CYAN  </div>
<div class="line">‚Üí Cloud connecting issues ‚Üí Check provisioning, credentials</div>
<div class="line"> </div>
<div class="line">Scenario 3: LED = OFF</div>
<div class="line">‚Üí Power/boot issues ‚Üí Check power supply, logs</div>
<div class="line"> </div>
<div class="line">Scenario 4: LED = SOLID_GREEN, maar geen data in cloud</div>
<div class="line">‚Üí Data pipeline issue ‚Üí Check P1 meter connection, logs</div>
</div><!-- fragment --><h3 class="doxsection"><a class="anchor" id="autotoc_md51"></a>
Toekomstige Uitbreidingen</h3>
<ul>
<li>‚è≥ <b>Brightness configuratie</b> - Kconfig voor LED brightness (dim voor slaapkamer)</li>
<li>‚è≥ <b>Custom patterns</b> - User defined patterns via nRF Cloud</li>
<li>‚è≥ <b>Disable option</b> - Runtime LED on/off toggle (power saving)</li>
<li>‚è≥ <b>Error codes</b> - Blink sequenties voor specifieke errors (morse code style)</li>
<li>‚è≥ <b>Multi-color blink</b> - Twee kleuren alternerend (bijv. rood-blauw voor network error)</li>
</ul>
<hr  />
<h2 class="doxsection"><a class="anchor" id="autotoc_md53"></a>
Zie Ook</h2>
<ul>
<li><a class="el" href="led_8c.html">led.c</a> - Implementatie</li>
<li><a class="el" href="led_8h.html">led.h</a> - Public API</li>
<li><a class="el" href="network.html">Network Module</a> - Network status bron</li>
<li><a class="el" href="cloud.html">Cloud Module</a> - Cloud status bron </li>
</ul>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<div id="page-nav" class="page-nav-panel">
<div id="page-nav-resize-handle"></div>
<div id="page-nav-tree">
<div id="page-nav-contents">
</div><!-- page-nav-contents -->
</div><!-- page-nav-tree -->
</div><!-- page-nav -->
</div><!-- container -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.14.0 </li>
  </ul>
</div>
</body>
</html>
