<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" class="dark-mode">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.14.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<!-- BEGIN opengraph metadata -->
<meta property="og:title" content="SolarResult Dinnis Core API Documentation" />
<meta property="og:description" content="API documentation for SolarResult Dinnis Core - IoT firmware for smart meter gateway device built with Zephyr RTOS on Nordic nRF9161" />
<!-- END opengraph metadata -->
<!-- Favicon -->
<link rel="icon" type="image/svg+xml" href="solar_result_white.svg">
<title>SolarResult Dinnis Core: Development Guide</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="doxygen-awesome-fragment-copy-button.js"></script>
<script type="text/javascript" src="doxygen-awesome-paragraph-link.js"></script>
<script type="text/javascript" src="doxygen-awesome-interactive-toc.js"></script>
<script type="text/javascript" src="doxygen-awesome-tabs.js"></script>
<script type="text/javascript">
    // Initialize Doxygen Awesome features (dark mode only, no toggle)
    DoxygenAwesomeFragmentCopyButton.init()
    DoxygenAwesomeParagraphLink.init()
    DoxygenAwesomeInteractiveToc.init()
    DoxygenAwesomeTabs.init()
</script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-custom.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="solar_result_white.svg"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">SolarResult Dinnis Core
   &#160;<span id="projectnumber">v1.0.0-unstable</span>
   </div>
   <div id="projectbrief">Dinnis Rev1.0.0 Firmware - IoT Gateway for DSMR P1 Smart Meters</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.14.0 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search/",'.html');
</script>
<script type="text/javascript">
$(function() { codefold.init(); });
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search',true);
  $(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(function(){initNavTree('md__2home_2ruben_2Documents_2solarresult_2firmware_2dinnis-core_2docs_2development-guide.html','',''); });
</script>
<div id="container">
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">Development Guide </div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="anchor" id="autotoc_md323"></a></p>
<hr  />
<h1 class="doxsection"><a class="anchor" id="autotoc_md325"></a>
üìã Overzicht</h1>
<p>Dit document beschrijft de complete development workflow voor het Dinnis Core firmware project, inclusief environment setup, west configuratie, build instructies, en debug procedures.</p>
<hr  />
<h1 class="doxsection"><a class="anchor" id="autotoc_md327"></a>
üõ†Ô∏è Environment Setup</h1>
<h2 class="doxsection"><a class="anchor" id="autotoc_md328"></a>
Prerequisites</h2>
<p><b>Vereiste Software:</b></p><ul>
<li><b>nRF Connect SDK v3.1.1</b> (includes Zephyr v4.2.0)</li>
<li><b>West</b> meta-tool (included in nRF Connect SDK)</li>
<li><b>nRF Command Line Tools</b> (voor flashing en debugging)</li>
<li><b>Python 3.9+</b> (voor tooling scripts)</li>
</ul>
<p><b>VS Code Extensions (aanbevolen):</b> </p><div class="fragment"><div class="line">code --install-extension nordic-semiconductor.nrf-connect</div>
<div class="line">code --install-extension nordic-semiconductor.nrf-connect-extension-pack</div>
</div><!-- fragment --><p><b>nRF Cloud Utilities:</b> </p><div class="fragment"><div class="line">pip install nrfcloud-utils</div>
<div class="line">nrfutil self-upgrade</div>
<div class="line">nrfutil install device completion toolchain-manager</div>
</div><!-- fragment --><h2 class="doxsection"><a class="anchor" id="autotoc_md329"></a>
Toolchain Verificatie</h2>
<p><b>Check ge√Ønstalleerde toolchains:</b> </p><div class="fragment"><div class="line">nrfutil toolchain-manager list</div>
</div><!-- fragment --><p><b>Activeer nRF Connect environment:</b></p>
<p><b>Methode 1 (VS Code - Aanbevolen):</b></p><ul>
<li>Druk <span class="tt">Ctrl+Shift+P</span></li>
<li>Selecteer <b>&gt;nRF Connect: Create Shell Terminal</b></li>
</ul>
<p><b>Methode 2 (Command Line - Interactive):</b> </p><div class="fragment"><div class="line">nrfutil toolchain-manager launch \</div>
<div class="line">    --shell \</div>
<div class="line">    --toolchain-path &quot;/home/&lt;user&gt;/ncs/toolchains/&lt;toolchain_id&gt;/&quot;</div>
</div><!-- fragment --><p><b>Methode 3 (Command Line - Non-Interactive, voor CI/CD):</b> </p><div class="fragment"><div class="line">nrfutil toolchain-manager launch \</div>
<div class="line">    --toolchain-path &quot;/home/&lt;user&gt;/ncs/toolchains/&lt;toolchain_id&gt;&quot; \</div>
<div class="line">    -- &lt;command&gt;</div>
</div><!-- fragment --><hr  />
<h1 class="doxsection"><a class="anchor" id="autotoc_md331"></a>
‚öôÔ∏è West Configuratie</h1>
<p><b>West is ALLEEN beschikbaar binnen nRF Connect environment!</b></p>
<h2 class="doxsection"><a class="anchor" id="autotoc_md332"></a>
Eerste Keer Setup</h2>
<div class="fragment"><div class="line"># Configureer board root (custom board definitie)</div>
<div class="line">west config build.cmake-args &quot; -DBOARD_ROOT=../&quot;</div>
<div class="line"> </div>
<div class="line"># Selecteer target board</div>
<div class="line">west config build.board &quot;dinnis_rev1_0_0/nrf9161/ns&quot;</div>
<div class="line"> </div>
<div class="line"># Configureer build directory</div>
<div class="line">west config build.build-dir &quot;build&quot;</div>
</div><!-- fragment --><h2 class="doxsection"><a class="anchor" id="autotoc_md333"></a>
Verificatie</h2>
<div class="fragment"><div class="line"># Check west versie</div>
<div class="line">west --version</div>
<div class="line"> </div>
<div class="line"># Check huidige configuratie</div>
<div class="line">west config -l</div>
</div><!-- fragment --><p><b>Verwachte output:</b> </p><div class="fragment"><div class="line">build.cmake-args= -DBOARD_ROOT=../</div>
<div class="line">build.board=dinnis_rev1_0_0/nrf9161/ns</div>
<div class="line">build.build-dir=build</div>
</div><!-- fragment --><hr  />
<h1 class="doxsection"><a class="anchor" id="autotoc_md335"></a>
üèóÔ∏è Build Instructies</h1>
<h2 class="doxsection"><a class="anchor" id="autotoc_md336"></a>
Standard Build</h2>
<div class="fragment"><div class="line"># Vanuit project root</div>
<div class="line">west build application</div>
</div><!-- fragment --><p><b>Build output:</b> <span class="tt">build/zephyr/zephyr.elf</span>, <span class="tt">build/zephyr/zephyr.hex</span></p>
<h2 class="doxsection"><a class="anchor" id="autotoc_md337"></a>
Clean Build</h2>
<div class="fragment"><div class="line"># Verwijder oude build artifacts</div>
<div class="line">west build -t clean</div>
<div class="line"> </div>
<div class="line"># Of volledige rebuild</div>
<div class="line">west build -p always application</div>
</div><!-- fragment --><h2 class="doxsection"><a class="anchor" id="autotoc_md338"></a>
Debug Build</h2>
<p>Voor extra debug logging en assertions:</p>
<div class="fragment"><div class="line">west build application -- -DOVERLAY_CONFIG=debug.conf</div>
</div><!-- fragment --><p><b>Debug configuratie bevat:</b></p><ul>
<li>Verbose logging (LOG_LEVEL_DBG)</li>
<li>Assertions enabled</li>
<li>Stack canaries</li>
<li>Thread names</li>
<li>Extra runtime checks</li>
</ul>
<h2 class="doxsection"><a class="anchor" id="autotoc_md339"></a>
Build voor Specifiek Board</h2>
<div class="fragment"><div class="line"># Tijdelijk ander board (overschrijft west config)</div>
<div class="line">west build -b dinnis_rev1_0_0/nrf9161/ns application</div>
<div class="line"> </div>
<div class="line"># Of met custom board root</div>
<div class="line">west build -b dinnis_rev1_0_0/nrf9161/ns application -- -DBOARD_ROOT=../</div>
</div><!-- fragment --><hr  />
<h1 class="doxsection"><a class="anchor" id="autotoc_md341"></a>
üì¶ Flash Instructies</h1>
<h2 class="doxsection"><a class="anchor" id="autotoc_md342"></a>
Via West</h2>
<div class="fragment"><div class="line"># Flash naar aangesloten device</div>
<div class="line">west flash</div>
</div><!-- fragment --><h2 class="doxsection"><a class="anchor" id="autotoc_md343"></a>
Via nrfjprog (Direct)</h2>
<div class="fragment"><div class="line"># Flash hex file</div>
<div class="line">nrfjprog --program build/zephyr/merged.hex --chiperase --verify</div>
<div class="line">nrfjprog --reset</div>
</div><!-- fragment --><h2 class="doxsection"><a class="anchor" id="autotoc_md344"></a>
Flash met Custom Runner</h2>
<div class="fragment"><div class="line"># Gebruik specifieke runner (jlink, openocd, etc.)</div>
<div class="line">west flash --runner jlink</div>
</div><!-- fragment --><hr  />
<h1 class="doxsection"><a class="anchor" id="autotoc_md346"></a>
üêõ Debug Procedures</h1>
<h2 class="doxsection"><a class="anchor" id="autotoc_md347"></a>
Serial Console</h2>
<p><b>Verbind via USB (UART):</b> </p><div class="fragment"><div class="line"># Linux</div>
<div class="line">screen /dev/ttyACM0 115200</div>
<div class="line"> </div>
<div class="line"># Of via minicom</div>
<div class="line">minicom -D /dev/ttyACM0 -b 115200</div>
</div><!-- fragment --><p><b>Verwachte output op boot:</b> </p><div class="fragment"><div class="line">*** Booting Zephyr OS build v4.2.0 ***</div>
<div class="line">[00:00:00.123,456] &lt;inf&gt; app: Dinnis Core starting...</div>
<div class="line">[00:00:00.234,567] &lt;inf&gt; network: Modem initializing...</div>
</div><!-- fragment --><h2 class="doxsection"><a class="anchor" id="autotoc_md348"></a>
GDB Debugging</h2>
<p><b>Start debug sessie:</b> </p><div class="fragment"><div class="line">west debug</div>
</div><!-- fragment --><p><b>Of met custom GDB server:</b> </p><div class="fragment"><div class="line"># Start JLink GDB server</div>
<div class="line">JLinkGDBServer -device nRF9161_xxAA -if SWD -speed 4000</div>
<div class="line"> </div>
<div class="line"># In andere terminal</div>
<div class="line">arm-none-eabi-gdb build/zephyr/zephyr.elf</div>
<div class="line">(gdb) target remote localhost:2331</div>
<div class="line">(gdb) monitor reset</div>
<div class="line">(gdb) load</div>
<div class="line">(gdb) break main</div>
<div class="line">(gdb) continue</div>
</div><!-- fragment --><h2 class="doxsection"><a class="anchor" id="autotoc_md349"></a>
RTT (Real-Time Transfer) Logging</h2>
<p>Voor low-latency debug output:</p>
<div class="fragment"><div class="line"># Start RTT viewer</div>
<div class="line">JLinkRTTViewer</div>
</div><!-- fragment --><p><b>Enable RTT in prj.conf:</b> </p><div class="fragment"><div class="line">CONFIG_USE_SEGGER_RTT=y</div>
<div class="line">CONFIG_RTT_CONSOLE=y</div>
<div class="line">CONFIG_LOG_BACKEND_RTT=y</div>
</div><!-- fragment --><hr  />
<h1 class="doxsection"><a class="anchor" id="autotoc_md351"></a>
üìä Build Targets</h1>
<h2 class="doxsection"><a class="anchor" id="autotoc_md352"></a>
Beschikbare Targets</h2>
<div class="fragment"><div class="line"># Toon alle targets</div>
<div class="line">west build -t help</div>
<div class="line"> </div>
<div class="line"># Veelgebruikte targets:</div>
<div class="line">west build -t menuconfig    # Interactieve Kconfig editor</div>
<div class="line">west build -t clean          # Clean build artifacts</div>
<div class="line">west build -t pristine       # Volledig schone build (incl. config)</div>
<div class="line">west build -t ram_report     # RAM usage report</div>
<div class="line">west build -t rom_report     # Flash usage report</div>
<div class="line">west build -t puncover       # Gedetailleerde size analyse</div>
</div><!-- fragment --><h2 class="doxsection"><a class="anchor" id="autotoc_md353"></a>
Size Analysis</h2>
<p><b>Quick size check:</b> </p><div class="fragment"><div class="line">west build -t rom_report</div>
<div class="line">west build -t ram_report</div>
</div><!-- fragment --><p><b>Detailed size analysis:</b> </p><div class="fragment"><div class="line"># Installeer puncover</div>
<div class="line">pip install puncover</div>
<div class="line"> </div>
<div class="line"># Genereer report</div>
<div class="line">west build -t puncover</div>
<div class="line"> </div>
<div class="line"># Open in browser</div>
<div class="line">xdg-open build/puncover/index.html</div>
</div><!-- fragment --><hr  />
<h1 class="doxsection"><a class="anchor" id="autotoc_md355"></a>
üîß Custom Board Definitie</h1>
<p>Het project gebruikt een custom board definitie in <span class="tt">boards/solarresult/dinnis_rev1_0_0/</span>.</p>
<p><b>Board structuur:</b> </p><div class="fragment"><div class="line">boards/solarresult/dinnis_rev1_0_0/</div>
<div class="line">‚îú‚îÄ‚îÄ dinnis_rev1_0_0_nrf9161_ns_defconfig  # Board-specifieke Kconfig</div>
<div class="line">‚îú‚îÄ‚îÄ dinnis_rev1_0_0_nrf9161_ns.dts        # Device tree</div>
<div class="line">‚îú‚îÄ‚îÄ dinnis_rev1_0_0_nrf9161_ns.yaml       # Board metadata</div>
<div class="line">‚îî‚îÄ‚îÄ board.cmake                            # CMake configuratie</div>
</div><!-- fragment --><p><b>‚ö†Ô∏è Belangrijk:</b> West moet weten waar custom board te vinden via: </p><div class="fragment"><div class="line">west config build.cmake-args &quot; -DBOARD_ROOT=../&quot;</div>
</div><!-- fragment --><hr  />
<h1 class="doxsection"><a class="anchor" id="autotoc_md357"></a>
üß™ Testing</h1>
<h2 class="doxsection"><a class="anchor" id="autotoc_md358"></a>
Unit Tests</h2>
<div class="fragment"><div class="line"># Run alle tests</div>
<div class="line">west build -b native_posix tests</div>
<div class="line"> </div>
<div class="line"># Run specifieke test</div>
<div class="line">west build -b native_posix tests -t run</div>
</div><!-- fragment --><h2 class="doxsection"><a class="anchor" id="autotoc_md359"></a>
Integration Tests</h2>
<div class="fragment"><div class="line"># Flash test firmware</div>
<div class="line">west build application -- -DOVERLAY_CONFIG=test.conf</div>
<div class="line">west flash</div>
<div class="line"> </div>
<div class="line"># Monitor output</div>
<div class="line">screen /dev/ttyACM0 115200</div>
</div><!-- fragment --><hr  />
<h1 class="doxsection"><a class="anchor" id="autotoc_md361"></a>
üìù Build Troubleshooting</h1>
<h2 class="doxsection"><a class="anchor" id="autotoc_md362"></a>
"West command not found"</h2>
<p><b>Probleem:</b> West is niet actief in current shell.</p>
<p><b>Oplossing:</b> Activeer nRF Connect environment eerst (zie ¬ß2.1).</p>
<h2 class="doxsection"><a class="anchor" id="autotoc_md363"></a>
"Board not found"</h2>
<p><b>Probleem:</b> Custom board root niet geconfigureerd.</p>
<p><b>Oplossing:</b> </p><div class="fragment"><div class="line">west config build.cmake-args &quot; -DBOARD_ROOT=../&quot;</div>
</div><!-- fragment --><h2 class="doxsection"><a class="anchor" id="autotoc_md364"></a>
"Build cache corrupt"</h2>
<p><b>Probleem:</b> Build artifacts inconsistent.</p>
<p><b>Oplossing:</b> </p><div class="fragment"><div class="line">west build -t pristine</div>
<div class="line">west build application</div>
</div><!-- fragment --><h2 class="doxsection"><a class="anchor" id="autotoc_md365"></a>
"Out of Flash/RAM"</h2>
<p><b>Probleem:</b> Applicatie te groot voor target.</p>
<p><b>Diagnose:</b> </p><div class="fragment"><div class="line">west build -t rom_report</div>
<div class="line">west build -t ram_report</div>
</div><!-- fragment --><p><b>Oplossingen:</b></p><ul>
<li>Disable debug logging (<span class="tt">CONFIG_LOG_DEFAULT_LEVEL=2</span>)</li>
<li>Disable unused features in <span class="tt">prj.conf</span></li>
<li>Optimize compiler flags (<span class="tt">CONFIG_SIZE_OPTIMIZATIONS=y</span>)</li>
<li>Review <span class="tt">puncover</span> output voor grote contributors</li>
</ul>
<hr  />
<h1 class="doxsection"><a class="anchor" id="autotoc_md367"></a>
üöÄ Advanced Topics</h1>
<h2 class="doxsection"><a class="anchor" id="autotoc_md368"></a>
Multi-Image Builds (MCUboot + App)</h2>
<p>Dinnis gebruikt sysbuild voor multi-image configuratie:</p>
<div class="fragment"><div class="line"># Build met bootloader</div>
<div class="line">west build -p application</div>
<div class="line"> </div>
<div class="line"># Output bevat:</div>
<div class="line"># - build/mcuboot/zephyr/zephyr.hex     (bootloader)</div>
<div class="line"># - build/zephyr/zephyr.signed.hex      (signed app)</div>
<div class="line"># - build/zephyr/merged.hex             (merged image)</div>
</div><!-- fragment --><h2 class="doxsection"><a class="anchor" id="autotoc_md369"></a>
FOTA Image Generatie</h2>
<div class="fragment"><div class="line"># Build FOTA update package</div>
<div class="line">west build application</div>
<div class="line"> </div>
<div class="line"># FOTA artifact</div>
<div class="line">ls -lh build/zephyr/app_update.bin</div>
</div><!-- fragment --><p><b>Upload naar nRF Cloud:</b> </p><div class="fragment"><div class="line"># Via nrfcloud CLI</div>
<div class="line">nrfcloud fota upload \</div>
<div class="line">    --file build/zephyr/app_update.bin \</div>
<div class="line">    --version &quot;1.2.3&quot; \</div>
<div class="line">    --description &quot;Bug fixes&quot;</div>
</div><!-- fragment --><h2 class="doxsection"><a class="anchor" id="autotoc_md370"></a>
Custom Overlays</h2>
<p><b>Device Tree overlay:</b> </p><div class="fragment"><div class="line">west build application -- -DDTC_OVERLAY_FILE=custom.overlay</div>
</div><!-- fragment --><p><b>Kconfig overlay:</b> </p><div class="fragment"><div class="line">west build application -- -DOVERLAY_CONFIG=&quot;debug.conf;custom.conf&quot;</div>
</div><!-- fragment --><hr  />
<h1 class="doxsection"><a class="anchor" id="autotoc_md372"></a>
üìö Zie Ook</h1>
<ul>
<li><b>Code Style Guidelines:</b> <span class="tt"><a class="el" href="structure_8md.html">guidelines/structure.md</a></span>, <span class="tt"><a class="el" href="style_8md.html">guidelines/style.md</a></span>, <span class="tt"><a class="el" href="best-practices_8md.html">guidelines/best-practices.md</a></span></li>
<li><b>Doxygen Documentatie:</b> Bouw met <span class="tt">./scripts/build-docs.sh --html</span></li>
<li><b>Provisioning Guide:</b> <span class="tt">docs/Provisioning and onboarding.md</span></li>
<li><b>nRF Connect SDK Docs:</b> <a href="https://docs.nordicsemi.com/ncs/latest/">https://docs.nordicsemi.com/ncs/latest/</a></li>
</ul>
<hr  />
<p><b>Laatst bijgewerkt:</b> 2025-11-04 </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<div id="page-nav" class="page-nav-panel">
<div id="page-nav-resize-handle"></div>
<div id="page-nav-tree">
<div id="page-nav-contents">
</div><!-- page-nav-contents -->
</div><!-- page-nav-tree -->
</div><!-- page-nav -->
</div><!-- container -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.14.0 </li>
  </ul>
</div>
</body>
</html>
