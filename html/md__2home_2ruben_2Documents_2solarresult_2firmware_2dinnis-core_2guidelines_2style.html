<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" class="dark-mode">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.14.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<!-- BEGIN opengraph metadata -->
<meta property="og:title" content="SolarResult Dinnis Core API Documentation" />
<meta property="og:description" content="API documentation for SolarResult Dinnis Core - IoT firmware for smart meter gateway device built with Zephyr RTOS on Nordic nRF9161" />
<!-- END opengraph metadata -->
<!-- Favicon -->
<link rel="icon" type="image/svg+xml" href="solar_result_white.svg">
<title>SolarResult Dinnis Core: Code Style - Formattering Regels</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="doxygen-awesome-fragment-copy-button.js"></script>
<script type="text/javascript" src="doxygen-awesome-paragraph-link.js"></script>
<script type="text/javascript" src="doxygen-awesome-interactive-toc.js"></script>
<script type="text/javascript" src="doxygen-awesome-tabs.js"></script>
<script type="text/javascript">
    // Initialize Doxygen Awesome features (dark mode only, no toggle)
    DoxygenAwesomeFragmentCopyButton.init()
    DoxygenAwesomeParagraphLink.init()
    DoxygenAwesomeInteractiveToc.init()
    DoxygenAwesomeTabs.init()
</script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-custom.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="solar_result_white.svg"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">SolarResult Dinnis Core
   </div>
   <div id="projectbrief">Dinnis Rev1.0.0 Firmware - IoT Gateway for DSMR P1 Smart Meters</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.14.0 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search/",'.html');
</script>
<script type="text/javascript">
$(function() { codefold.init(); });
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search',true);
  $(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(function(){initNavTree('md__2home_2ruben_2Documents_2solarresult_2firmware_2dinnis-core_2guidelines_2style.html','',''); });
</script>
<div id="container">
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">Code Style - Formattering Regels </div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="anchor" id="autotoc_md520"></a></p>
<p>Dit document beschrijft de code formattering conventies voor het Dinnis Core firmware project.</p>
<hr  />
<h1 class="doxsection"><a class="anchor" id="autotoc_md522"></a>
Indentatie en Formattering</h1>
<h2 class="doxsection"><a class="anchor" id="autotoc_md523"></a>
Spaties (GEEN Tabs)</h2>
<ul>
<li><b>Gebruik SPATIES, geen tabs</b></li>
<li><b>Indentatie diepte: 4 spaties</b> per niveau</li>
<li>Editor configuratie: converteer tabs naar spaties, tab width = 4</li>
</ul>
<h2 class="doxsection"><a class="anchor" id="autotoc_md524"></a>
Lege Regels</h2>
<p><b>Gebruik lege regels spaarzaam en consistent:</b></p>
<div class="fragment"><div class="line"><span class="comment">/* Correct - 1 lege regel tussen functies */</span></div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">void</span> function1(<span class="keywordtype">void</span>)</div>
<div class="line">{</div>
<div class="line">    <span class="comment">/* code */</span></div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">void</span> function2(<span class="keywordtype">void</span>)</div>
<div class="line">{</div>
<div class="line">    <span class="comment">/* code */</span></div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="comment">/* Correct - geen lege regels tussen gerelateerde statements */</span></div>
<div class="line"><span class="keywordtype">int</span> err = init_device();</div>
<div class="line"><span class="keywordflow">if</span> (err) {</div>
<div class="line">    LOG_ERR(<span class="stringliteral">&quot;Init failed: %d&quot;</span>, err);</div>
<div class="line">    <span class="keywordflow">return</span> err;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="comment">/* Fout - te veel whitespace */</span></div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">void</span> function1(<span class="keywordtype">void</span>)</div>
<div class="line">{</div>
<div class="line">    <span class="comment">/* code */</span></div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">void</span> function2(<span class="keywordtype">void</span>)  <span class="comment">/* ❗ Meerdere lege regels */</span></div>
<div class="line">{</div>
<div class="line">    <span class="comment">/* code */</span></div>
<div class="line">}</div>
</div><!-- fragment --><p><b>Binnen functies:</b></p><ul>
<li>1 lege regel om logische blokken te scheiden</li>
<li>Geen lege regel na opening <span class="tt">{</span> of voor closing <span class="tt">}</span></li>
<li>Geen meerdere opeenvolgende lege regels</li>
</ul>
<p><b>Tussen secties:</b></p><ul>
<li>Sectie header spreekt voor zich, geen extra whitespace nodig</li>
<li>1 lege regel voor nieuwe sectie header</li>
</ul>
<h2 class="doxsection"><a class="anchor" id="autotoc_md525"></a>
Brace Style</h2>
<p>Gebruik <b>K&amp;R brace style</b>:</p>
<div class="fragment"><div class="line"><span class="comment">/* Correct */</span></div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">void</span> function_name(<span class="keywordtype">void</span>)</div>
<div class="line">{</div>
<div class="line">    <span class="keywordflow">if</span> (condition) {</div>
<div class="line">        <span class="comment">/* code */</span></div>
<div class="line">    } <span class="keywordflow">else</span> {</div>
<div class="line">        <span class="comment">/* code */</span></div>
<div class="line">    }</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="comment">/* Fout - niet doen */</span></div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">void</span> function_name(<span class="keywordtype">void</span>) {  <span class="comment">// Opening brace op nieuwe regel voor functies</span></div>
<div class="line">    <span class="keywordflow">if</span> (condition)</div>
<div class="line">    {  <span class="comment">// Opening brace op zelfde regel voor control structures</span></div>
<div class="line">        <span class="comment">/* code */</span></div>
<div class="line">    }</div>
<div class="line">}</div>
</div><!-- fragment --><p><b>Regels:</b></p><ul>
<li>Functie opening brace <span class="tt">{</span> op <b>nieuwe regel</b></li>
<li>Control structure (<span class="tt">if</span>, <span class="tt">while</span>, <span class="tt">for</span>, <span class="tt">switch</span>) opening brace op <b>zelfde regel</b></li>
<li><b>Altijd braces gebruiken, ook voor single-line bodies</b> - dit voorkomt bugs</li>
</ul>
<div class="fragment"><div class="line"><span class="comment">/* Correct - altijd braces */</span></div>
<div class="line"><span class="keywordflow">if</span> (condition) {</div>
<div class="line">    single_statement();</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="comment">/* Incorrect - geen braces */</span></div>
<div class="line"><span class="keywordflow">if</span> (condition)</div>
<div class="line">    single_statement();  <span class="comment">/* ❗ Gevaarlijk bij latere wijzigingen */</span></div>
</div><!-- fragment --><h2 class="doxsection"><a class="anchor" id="autotoc_md526"></a>
Line Length</h2>
<ul>
<li><b>Maximum 100 karakters per regel</b></li>
<li>Voor lange strings of comments mag je iets over de limiet gaan als dit de leesbaarheid verbetert</li>
<li>Break lange regels op logische punten (na operators, komma's)</li>
<li>Indent vervolgregels met een extra indentatie niveau (4 extra spaties)</li>
</ul>
<hr  />
<h1 class="doxsection"><a class="anchor" id="autotoc_md528"></a>
Naming Conventions</h1>
<h2 class="doxsection"><a class="anchor" id="autotoc_md529"></a>
Functies</h2>
<ul>
<li>Lowercase met underscores: <span class="tt">function_name()</span></li>
<li>Static functies: prefix met module naam waar zinvol: <span class="tt">led_set_state()</span></li>
<li>Duidelijke werkwoorden: <span class="tt">init</span>, <span class="tt">process</span>, <span class="tt">handle</span>, <span class="tt">publish</span>, <span class="tt">subscribe</span></li>
</ul>
<h2 class="doxsection"><a class="anchor" id="autotoc_md530"></a>
Variabelen</h2>
<ul>
<li>Lowercase met underscores: <span class="tt">my_variable</span></li>
<li>Beschrijvende namen, geen single-letter (behalve loop counters <span class="tt">i</span>, <span class="tt">j</span>)</li>
<li>Static/file scope variabelen: beschrijvende namen</li>
</ul>
<h2 class="doxsection"><a class="anchor" id="autotoc_md531"></a>
Constanten en Defines</h2>
<ul>
<li>UPPERCASE met underscores: <span class="tt">MAX_BUFFER_SIZE</span></li>
<li>Module prefix waar nodig: <span class="tt">LED_COLOR_RED</span>, <span class="tt">P_ONE_UART_BAUD_RATE</span></li>
</ul>
<h2 class="doxsection"><a class="anchor" id="autotoc_md532"></a>
Macro's</h2>
<p><b>Gebruik altijd volledige parentheses in macro's:</b></p>
<div class="fragment"><div class="line"><span class="comment">/* FOUT - gevaarlijk! */</span></div>
<div class="line"><span class="preprocessor">#define SQUARE(x) x * x</span></div>
<div class="line"><span class="comment">/* SQUARE(a+b) expandeert naar: a+b * a+b = a + (b*a) + b */</span></div>
<div class="line"> </div>
<div class="line"><span class="comment">/* CORRECT - veilig */</span></div>
<div class="line"><span class="preprocessor">#define SQUARE(x) ((x) * (x))</span></div>
<div class="line"><span class="comment">/* SQUARE(a+b) expandeert naar: ((a+b) * (a+b)) */</span></div>
<div class="line"> </div>
<div class="line"><span class="comment">/* FOUT */</span></div>
<div class="line"><span class="preprocessor">#define MAX(a, b) a &gt; b ? a : b</span></div>
<div class="line"><span class="comment">/* MAX(x++, y++) heeft side-effects! */</span></div>
<div class="line"> </div>
<div class="line"><span class="comment">/* CORRECT */</span></div>
<div class="line"><span class="preprocessor">#define MAX(a, b) ((a) &gt; (b) ? (a) : (b))</span></div>
</div><!-- fragment --><p><b>Regels voor macro's:</b></p><ol type="1">
<li>Plaats haakjes om <b>elk</b> argument</li>
<li>Plaats haakjes om de <b>hele expressie</b></li>
<li>Vermijd macro's met side-effects waar mogelijk</li>
<li>Gebruik UPPERCASE voor functie-achtige macro's</li>
<li>Voor complexe macro's, overweeg een inline functie (C99+)</li>
</ol>
<h2 class="doxsection"><a class="anchor" id="autotoc_md533"></a>
Enums</h2>
<ul>
<li>Enum type: lowercase met underscores: <span class="tt">enum <a class="el" href="group__network.html#ga1d388be7b8bc84c14c1c37a93d4e4c55">network_status</a></span></li>
<li>Enum waarden: UPPERCASE met module prefix: <span class="tt">NETWORK_CONNECTED</span>, <span class="tt">CLOUD_READY</span></li>
</ul>
<h2 class="doxsection"><a class="anchor" id="autotoc_md534"></a>
Structs</h2>
<ul>
<li>Lowercase met underscores: <span class="tt">struct led_msg</span></li>
<li>Module specifieke prefix: <span class="tt">struct <a class="el" href="structnetwork__msg.html">network_msg</a></span>, <span class="tt">struct <a class="el" href="structcloud__msg.html">cloud_msg</a></span></li>
</ul>
<h2 class="doxsection"><a class="anchor" id="autotoc_md535"></a>
Pointers</h2>
<p><b>Asterisk <span class="tt">*</span> hoort bij de variabele naam, niet bij het type:</b></p>
<div class="fragment"><div class="line"><span class="comment">/* Correct */</span></div>
<div class="line"><span class="keywordtype">int</span> *p, *q;      <span class="comment">/* p en q zijn beide pointers */</span></div>
<div class="line"><span class="keywordtype">char</span> *str;</div>
<div class="line"> </div>
<div class="line"><span class="comment">/* Incorrect */</span></div>
<div class="line"><span class="keywordtype">int</span>* p, q;       <span class="comment">/* ❗ Verwarrend: alleen p is pointer, q is int! */</span></div>
</div><!-- fragment --><p><b>Rationale</b>: Dit maakt duidelijk dat de <span class="tt">*</span> bij de declarator hoort, niet bij het type. Dit voorkomt verwarring bij meerdere declaraties op één regel.</p>
<hr  />
<h1 class="doxsection"><a class="anchor" id="autotoc_md537"></a>
Comments en Documentatie</h1>
<h2 class="doxsection"><a class="anchor" id="autotoc_md538"></a>
Comment Style</h2>
<p><b>Gebruik <span class="tt">/* */</span> voor alle comments, GEEN <span class="tt">//</span></b></p>
<div class="fragment"><div class="line"><span class="comment">/* Correct - multi-line comment */</span></div>
<div class="line"><span class="comment">/*</span></div>
<div class="line"><span class="comment"> * This is a longer explanation</span></div>
<div class="line"><span class="comment"> * spanning multiple lines</span></div>
<div class="line"><span class="comment"> */</span></div>
<div class="line"> </div>
<div class="line"><span class="comment">/* Correct - single line */</span></div>
<div class="line"><span class="keywordtype">int</span> <a class="code hl_variable" href="p__one_8c.html#a354b99b030bdfe136490f848c05d4788">value</a>; <span class="comment">/* Inline comment */</span></div>
<div class="line"> </div>
<div class="line"><span class="comment">// FOUT - niet gebruiken</span></div>
<div class="line"><span class="comment">// This is wrong</span></div>
<div class="ttc" id="ap__one_8c_html_a354b99b030bdfe136490f848c05d4788"><div class="ttname"><a href="p__one_8c.html#a354b99b030bdfe136490f848c05d4788">value</a></div><div class="ttdeci">obis_fixed_point_t value</div><div class="ttdef"><b>Definition</b> <a href="p__one_8c_source.html#l00254">p_one.c:254</a></div></div>
</div><!-- fragment --><h2 class="doxsection"><a class="anchor" id="autotoc_md539"></a>
Doxygen Documentatie</h2>
<p>Voor publieke functies en belangrijke interne functies:</p>
<div class="fragment"><div class="line"></div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">int</span> my_function(<span class="keywordtype">int</span> param1, <span class="keywordtype">bool</span> param2)</div>
<div class="line">{</div>
<div class="line">    <span class="comment">/* implementation */</span></div>
<div class="line">}</div>
</div><!-- fragment --><hr  />
<h1 class="doxsection"><a class="anchor" id="autotoc_md541"></a>
Variable Declarations</h1>
<h2 class="doxsection"><a class="anchor" id="autotoc_md542"></a>
Initialization</h2>
<p><b>Initialiseer variabelen bij declaratie waar mogelijk:</b></p>
<div class="fragment"><div class="line"><span class="comment">/* Correct */</span></div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">int</span> counter = 0;</div>
<div class="line"><span class="keywordtype">bool</span> ready = <span class="keyword">false</span>;</div>
<div class="line"><span class="keyword">const</span> <span class="keywordtype">char</span> *name = <span class="stringliteral">&quot;module&quot;</span>;</div>
<div class="line"> </div>
<div class="line"><span class="comment">/* Ook correct - struct initialization */</span></div>
<div class="line"><span class="keyword">struct </span>module_msg msg = {</div>
<div class="line">    .field1 = 0,</div>
<div class="line">    .field2 = 100,</div>
<div class="line">};</div>
<div class="line"> </div>
<div class="line"><span class="comment">/* Modern C style - designated initializers */</span></div>
<div class="line"><span class="keyword">struct </span>complex_struct <a class="code hl_variable" href="message__queue_8c.html#afe1b4b4eb80224902d335e63ace502af">data</a> = {0};  <span class="comment">/* Zero-initialize all fields */</span></div>
<div class="ttc" id="amessage__queue_8c_html_afe1b4b4eb80224902d335e63ace502af"><div class="ttname"><a href="message__queue_8c.html#afe1b4b4eb80224902d335e63ace502af">data</a></div><div class="ttdeci">struct p_one_msg data</div><div class="ttdef"><b>Definition</b> <a href="message__queue_8c_source.html#l00151">message_queue.c:151</a></div></div>
</div><!-- fragment --><h2 class="doxsection"><a class="anchor" id="autotoc_md543"></a>
Scope en Static</h2>
<div class="fragment"><div class="line"><span class="comment">/* File-scope variabelen: altijd static */</span></div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">int</span> module_state = 0;</div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">bool</span> initialized = <span class="keyword">false</span>;</div>
<div class="line"> </div>
<div class="line"><span class="comment">/* Const voor read-only data */</span></div>
<div class="line"><span class="keyword">static</span> <span class="keyword">const</span> uint32_t TIMEOUT_MS = 5000;</div>
<div class="line"><span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span> *MODULE_NAME = <span class="stringliteral">&quot;example&quot;</span>;</div>
<div class="line"> </div>
<div class="line"><span class="comment">/* Function-scope: declareer dicht bij gebruik */</span></div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">void</span> process_data(<span class="keywordtype">void</span>)</div>
<div class="line">{</div>
<div class="line">    <span class="comment">/* Declareer waar je het gebruikt */</span></div>
<div class="line">    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; count; i++) {</div>
<div class="line">        <span class="comment">/* ... */</span></div>
<div class="line">    }</div>
<div class="line">    </div>
<div class="line">    <span class="comment">/* Niet bovenaan functie als je het pas later gebruikt */</span></div>
<div class="line">}</div>
</div><!-- fragment --><h2 class="doxsection"><a class="anchor" id="autotoc_md544"></a>
Arrays en Buffers</h2>
<div class="fragment"><div class="line"><span class="comment">/* Statische buffers - size in define */</span></div>
<div class="line"><span class="preprocessor">#define BUFFER_SIZE 256</span></div>
<div class="line"><span class="keyword">static</span> uint8_t buffer[BUFFER_SIZE];</div>
<div class="line"> </div>
<div class="line"><span class="comment">/* Stack buffers - size duidelijk */</span></div>
<div class="line">uint8_t temp_buf[64] = {0};</div>
<div class="line"> </div>
<div class="line"><span class="comment">/* String literals */</span></div>
<div class="line"><span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span> *error_msg = <span class="stringliteral">&quot;Operation failed&quot;</span>;</div>
</div><!-- fragment --><h2 class="doxsection"><a class="anchor" id="autotoc_md545"></a>
sizeof Operator</h2>
<p><b>Gebruik <span class="tt">sizeof(variable)</span> in plaats van <span class="tt">sizeof(type)</span> waar mogelijk:</b></p>
<div class="fragment"><div class="line"><span class="comment">/* GOED - robuust bij type changes */</span></div>
<div class="line"><span class="keywordtype">int</span> *p = malloc(100 * <span class="keyword">sizeof</span>(*p));</div>
<div class="line"><span class="keyword">struct </span><a class="code hl_variable" href="message__queue_8c.html#afe1b4b4eb80224902d335e63ace502af">data</a> *items = malloc(count * <span class="keyword">sizeof</span>(*items));</div>
<div class="line"> </div>
<div class="line"><span class="comment">/* MINDER GOED - moet aangepast als type wijzigt */</span></div>
<div class="line"><span class="keywordtype">int</span> *p = malloc(100 * <span class="keyword">sizeof</span>(<span class="keywordtype">int</span>));</div>
<div class="line"><span class="keyword">struct </span><a class="code hl_variable" href="message__queue_8c.html#afe1b4b4eb80224902d335e63ace502af">data</a> *items = malloc(count * <span class="keyword">sizeof</span>(<span class="keyword">struct</span> <a class="code hl_variable" href="message__queue_8c.html#afe1b4b4eb80224902d335e63ace502af">data</a>));</div>
</div><!-- fragment --><p><b>Rationale</b>: Als je later het type van de variabele wijzigt, past de <span class="tt">sizeof(*var)</span> vorm automatisch mee. Dit voorkomt bugs.</p>
<p><b>Voor arrays:</b> </p><div class="fragment"><div class="line"><span class="keywordtype">int</span> array[10];</div>
<div class="line"><span class="keywordtype">size_t</span> num_elements = <span class="keyword">sizeof</span>(array) / <span class="keyword">sizeof</span>(array[0]);  <span class="comment">/* Correct */</span></div>
<div class="line"><span class="keywordtype">size_t</span> num_elements = <span class="keyword">sizeof</span>(array) / <span class="keyword">sizeof</span>(*array);    <span class="comment">/* Ook goed */</span></div>
</div><!-- fragment --><hr  />
<h1 class="doxsection"><a class="anchor" id="autotoc_md547"></a>
Magic Numbers en Constants</h1>
<h2 class="doxsection"><a class="anchor" id="autotoc_md548"></a>
enum vs #define</h2>
<p><b>Gebruik <span class="tt">enum</span> voor gerelateerde waarden, <span class="tt">#define</span> voor losstaande constanten:</b></p>
<div class="fragment"><div class="line"><span class="comment">/* GOED - gebruik enum voor gerelateerde staten/codes */</span></div>
<div class="line"><span class="keyword">enum</span> <a class="code hl_enumeration" href="group__network.html#ga1d388be7b8bc84c14c1c37a93d4e4c55">network_status</a> {</div>
<div class="line">    <a class="code hl_enumvalue" href="group__network.html#gga1d388be7b8bc84c14c1c37a93d4e4c55aa6b528626e4460829069fc4e7d198c7c">NETWORK_DISCONNECTED</a>,</div>
<div class="line">    NETWORK_CONNECTING,</div>
<div class="line">    <a class="code hl_enumvalue" href="group__network.html#gga1d388be7b8bc84c14c1c37a93d4e4c55ad0d9cbede31a8edb50844d1c5558039e">NETWORK_CONNECTED</a></div>
<div class="line">};</div>
<div class="line"> </div>
<div class="line"><span class="keyword">enum</span> error_code {</div>
<div class="line">    ERR_OK = 0,</div>
<div class="line">    ERR_INVALID = -1,</div>
<div class="line">    ERR_TIMEOUT = -2</div>
<div class="line">};</div>
<div class="line"> </div>
<div class="line"><span class="comment">/* GOED - gebruik #define voor losstaande waarden */</span></div>
<div class="line"><span class="preprocessor">#define MAX_BUFFER_SIZE 1024</span></div>
<div class="line"><span class="preprocessor">#define TIMEOUT_MS 5000</span></div>
<div class="line"><span class="preprocessor">#define VERSION_STRING &quot;1.0.0&quot;</span></div>
<div class="line"> </div>
<div class="line"><span class="comment">/* FOUT - #define voor gerelateerde waarden */</span></div>
<div class="line"><span class="preprocessor">#define STATE_IDLE 0      </span><span class="comment">/* ❗ Gebruik enum */</span><span class="preprocessor"></span></div>
<div class="line"><span class="preprocessor">#define STATE_BUSY 1</span></div>
<div class="line"><span class="preprocessor">#define STATE_ERROR 2</span></div>
<div class="ttc" id="agroup__network_html_ga1d388be7b8bc84c14c1c37a93d4e4c55"><div class="ttname"><a href="group__network.html#ga1d388be7b8bc84c14c1c37a93d4e4c55">network_status</a></div><div class="ttdeci">network_status</div><div class="ttdef"><b>Definition</b> <a href="network__zbus_8h_source.html#l00031">network_zbus.h:31</a></div></div>
<div class="ttc" id="agroup__network_html_gga1d388be7b8bc84c14c1c37a93d4e4c55aa6b528626e4460829069fc4e7d198c7c"><div class="ttname"><a href="group__network.html#gga1d388be7b8bc84c14c1c37a93d4e4c55aa6b528626e4460829069fc4e7d198c7c">NETWORK_DISCONNECTED</a></div><div class="ttdeci">@ NETWORK_DISCONNECTED</div><div class="ttdef"><b>Definition</b> <a href="network__zbus_8h_source.html#l00036">network_zbus.h:36</a></div></div>
<div class="ttc" id="agroup__network_html_gga1d388be7b8bc84c14c1c37a93d4e4c55ad0d9cbede31a8edb50844d1c5558039e"><div class="ttname"><a href="group__network.html#gga1d388be7b8bc84c14c1c37a93d4e4c55ad0d9cbede31a8edb50844d1c5558039e">NETWORK_CONNECTED</a></div><div class="ttdeci">@ NETWORK_CONNECTED</div><div class="ttdef"><b>Definition</b> <a href="network__zbus_8h_source.html#l00039">network_zbus.h:39</a></div></div>
</div><!-- fragment --><p><b>Voordelen van enum:</b></p><ul>
<li>Type-checking (in sommige contexten)</li>
<li>Automatische waarde incrementen</li>
<li>Debugger kan enum namen tonen</li>
<li>Groepering maakt relatie duidelijk</li>
</ul>
<p><b>Wanneer #define:</b></p><ul>
<li>String constanten</li>
<li>Expressies/macro's</li>
<li>Waarden die geen natuurlijke groep vormen</li>
<li>Bitmaskers (soms, maar <span class="tt">enum</span> kan ook met expliciete waarden)</li>
</ul>
<h2 class="doxsection"><a class="anchor" id="autotoc_md549"></a>
Gebruik Named Constants</h2>
<div class="fragment"><div class="line"><span class="comment">/* Correct - gebruik defines of enums */</span></div>
<div class="line"><span class="preprocessor">#define MAX_RETRIES 3</span></div>
<div class="line"><span class="preprocessor">#define TIMEOUT_MS 5000</span></div>
<div class="line"><span class="preprocessor">#define BUFFER_SIZE 256</span></div>
<div class="line"> </div>
<div class="line"><span class="keywordflow">if</span> (retry_count &gt;= MAX_RETRIES) {</div>
<div class="line">    <span class="comment">/* ... */</span></div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="comment">/* Fout - magic numbers */</span></div>
<div class="line"><span class="keywordflow">if</span> (retry_count &gt;= 3) {  <span class="comment">/* ❗ Wat betekent 3? */</span></div>
<div class="line">    <span class="comment">/* ... */</span></div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line">k_sleep(K_MSEC(5000));  <span class="comment">/* ❗ Waarom 5000? */</span></div>
</div><!-- fragment --><h2 class="doxsection"><a class="anchor" id="autotoc_md550"></a>
Uitzonderingen</h2>
<p>Sommige getallen zijn "self-documenting": </p><div class="fragment"><div class="line"><span class="comment">/* OK - duidelijk zonder define */</span></div>
<div class="line"><a class="code hl_variable" href="p__one_8c.html#a354b99b030bdfe136490f848c05d4788">value</a> = <a class="code hl_variable" href="p__one_8c.html#a354b99b030bdfe136490f848c05d4788">value</a> * 2;</div>
<div class="line">array[0] = first_item;</div>
<div class="line">percentage = (count * 100) / total;</div>
<div class="line"> </div>
<div class="line"><span class="comment">/* OK - standaard waarden */</span></div>
<div class="line"><span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; 10; i++)  <span class="comment">/* Kleine loop counts */</span></div>
<div class="line"><span class="keywordflow">if</span> (strcmp(str1, str2) == 0)  <span class="comment">/* Standaard return waarden */</span></div>
</div><!-- fragment --><hr  />
<h1 class="doxsection"><a class="anchor" id="autotoc_md552"></a>
NULL Checks en Validatie</h1>
<h2 class="doxsection"><a class="anchor" id="autotoc_md553"></a>
Pointer Validatie</h2>
<div class="fragment"><div class="line"><span class="comment">/* Correct - check parameters */</span></div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">int</span> process_data(<span class="keyword">const</span> uint8_t *<a class="code hl_variable" href="message__queue_8c.html#afe1b4b4eb80224902d335e63ace502af">data</a>, <span class="keywordtype">size_t</span> len)</div>
<div class="line">{</div>
<div class="line">    <span class="keywordflow">if</span> (<a class="code hl_variable" href="message__queue_8c.html#afe1b4b4eb80224902d335e63ace502af">data</a> == NULL) {</div>
<div class="line">        LOG_ERR(<span class="stringliteral">&quot;Data pointer is NULL&quot;</span>);</div>
<div class="line">        <span class="keywordflow">return</span> -EINVAL;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (len == 0) {</div>
<div class="line">        LOG_WRN(<span class="stringliteral">&quot;Zero length data&quot;</span>);</div>
<div class="line">        <span class="keywordflow">return</span> -EINVAL;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* Process data */</span></div>
<div class="line">    <span class="keywordflow">return</span> 0;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="comment">/* Voor internal functies: gebruik assertions */</span></div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">void</span> internal_helper(<span class="keyword">struct</span> <a class="code hl_variable" href="message__queue_8c.html#afe1b4b4eb80224902d335e63ace502af">data</a> *ptr)</div>
<div class="line">{</div>
<div class="line">    __ASSERT(ptr != NULL, <span class="stringliteral">&quot;Pointer must not be NULL&quot;</span>);</div>
<div class="line">    <span class="comment">/* ... */</span></div>
<div class="line">}</div>
</div><!-- fragment --><h2 class="doxsection"><a class="anchor" id="autotoc_md554"></a>
Bool Checks</h2>
<div class="fragment"><div class="line"><span class="comment">/* Correct - expliciete bool checks */</span></div>
<div class="line"><span class="keywordflow">if</span> (ready) {  <span class="comment">/* Niet: if (ready == true) */</span></div>
<div class="line">    <span class="comment">/* ... */</span></div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keywordflow">if</span> (!initialized) {  <span class="comment">/* Niet: if (initialized == false) */</span></div>
<div class="line">    <span class="comment">/* ... */</span></div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="comment">/* Voor pointers */</span></div>
<div class="line"><span class="keywordflow">if</span> (ptr != NULL) {  <span class="comment">/* Expliciete NULL check */</span></div>
<div class="line">    <span class="comment">/* ... */</span></div>
<div class="line">}</div>
</div><!-- fragment --><hr  />
<h1 class="doxsection"><a class="anchor" id="autotoc_md556"></a>
ARG_UNUSED Macro</h1>
<p>Gebruik <span class="tt">ARG_UNUSED()</span> voor ongebruikte parameters:</p>
<div class="fragment"><div class="line"><span class="comment">/* Correct */</span></div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">void</span> callback(<span class="keyword">struct</span> k_work *work)</div>
<div class="line">{</div>
<div class="line">    ARG_UNUSED(work);  <span class="comment">/* Voorkomt compiler warning */</span></div>
<div class="line">    </div>
<div class="line">    <span class="comment">/* implementation */</span></div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="comment">/* Ook correct - gebruik parameter naam zelf als doc */</span></div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">void</span> handler(<span class="keywordtype">void</span> *o)</div>
<div class="line">{</div>
<div class="line">    ARG_UNUSED(o);</div>
<div class="line">    <span class="comment">/* ... */</span></div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="comment">/* Incorrect */</span></div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">void</span> callback(<span class="keyword">struct</span> k_work *work)</div>
<div class="line">{</div>
<div class="line">    <span class="comment">/* ❗ Compiler warning: unused parameter */</span></div>
<div class="line">}</div>
</div><!-- fragment --><hr  />
<p><em>Laatste update: 17 oktober 2025</em> </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<div id="page-nav" class="page-nav-panel">
<div id="page-nav-resize-handle"></div>
<div id="page-nav-tree">
<div id="page-nav-contents">
</div><!-- page-nav-contents -->
</div><!-- page-nav-tree -->
</div><!-- page-nav -->
</div><!-- container -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.14.0 </li>
  </ul>
</div>
</body>
</html>
